var X=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var Y=(t,e,s)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||(e={}))se.call(e,s)&&Y(t,s,e[s]);if(R)for(var s of R(e))ae.call(e,s)&&Y(t,s,e[s]);return t},N=(t,e)=>ee(t,te(e));import{c as re,I as ne,o as i,a as o,F as A,r as S,n as v,b as c,t as h,d as le,w as x,v as ie,e as W,f as T,g as d,h as y,i as oe,j as k,k as ce,l as I,m as f,p as pe,A as q,q as ue,s as de,K as he,u as _e}from"./vendor.9c08b6a2.js";const ye=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}};ye();const V=t=>{const e=new RegExp("(https?://[^\\/]+)/.*");return(t.match(e)||[])[1]||!1},b=t=>{let e,s,l;return e=t.getDate(),e<10&&(e="0"+e),s=t.getMonth()+1,s<10&&(s="0"+s),l=t.getFullYear(),e+"."+s+"."+l},C=t=>{let e,s,l;return e=Math.floor(t/3600),s=Math.floor(t/60)-e*60,l=t%60,[e.toString().padStart(2,"0"),s.toString().padStart(2,"0"),l.toString().padStart(2,"0")].join(":")},Z=t=>{if(!t)return 0;let e,s,l;return t=t.split(":"),e=parseInt(t[0])||0,s=parseInt(t[1])||0,l=parseInt(t[2])||0,e*3600+s*60+l},me=()=>{const t=new Date;return[t,t]},B=()=>{const t=new Date;let e=new Date(t-(t.getDay()+6)%7*864e5),s=new Date(e.getTime()+6*864e5);return[e,s]},ge=()=>{const t=new Date;let e=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0);return[e,s]},fe=()=>{const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},j=(t,e=!1)=>Object.values(t).reduce((s,l,r)=>N(O({},s),{[e?l[e]:r]:l}),{}),E=t=>parseFloat(String(t||0).replace(",",".")),L={917:[917,59,19,510,827,953,549,1049],484:[484,609,917,1117,1047],589:["*"],59:["*"]},P=[{name:"\u041D\u0435\u0434\u0435\u043B\u044C\u043A\u0430",page:"PageReportWeekly"},{name:"\u0413\u043E\u0434\u0438\u043A",page:"PageReportYearly"}],ve=async t=>fetch(t+"/scope",{}).then(e=>e.ok?e.json():Promise.reject(e.status)).then(e=>({status:1,result:e.result})).catch(e=>({status:0,result:e})),G=async(t,e=[])=>fetch(t+"/task.elapseditem.getlist",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{ID:"asc"},filter:e,select:["ID","TASK_ID","SECONDS","CREATED_DATE"],params:{NAV_PARAMS:{nPageSize:0}}})}).then(s=>s.json()).then(s=>s.result),ke=async(t,e)=>J(t+"/tasks.task.list",{order:{ID:"asc"},filter:e,select:["ID","TITLE","GROUP_ID","GROUP","CREATED_BY"]}).then(s=>s.reduce((l,r)=>l.concat(r.result.tasks),[])),De=async(t,e)=>fetch(t+"/sonet_group.get",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({ORDER:{ID:"asc"},FILTER:e})}).then(s=>s.json()).then(s=>s.result),Ie=async t=>fetch(t+"/user.current",{method:"post",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e.error!==void 0?{status:0,result:e.error_description}:{status:1,result:e.result}).catch(e=>({status:0,result:e})),we=async t=>{const e=Se(t);let s={ACTIVE:"true"};return L[e]!==void 0&&!L[e].includes("*")&&(s.ID=L[e]),L[e]===void 0&&(s.ID=e),J(t+"/user.get",{sort:"LAST_NAME",order:"asc",filter:s}).then(l=>l.reduce((r,a)=>r.concat(a.result),[]))},Ae=async t=>fetch("https://isdayoff.ru/api/getdata?year="+t+"&delimeter=&covid=1").then(e=>e.text()),Se=t=>t.match(/rest\/(\d+)/)[1]||!1,J=async(t,e)=>{const s=(n,p,u)=>(p.start=u,fetch(n,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(m=>m.json()));let l=[],r=0,a=null;for(;a===null||r<a;){let n=s(t,e,r);if(a===null){let p=await n;a=parseInt(p.total)}l.push(n),r+=50}return Promise.all(l)},$e=!0,Ce=[],Ue=JSON.parse(localStorage.appAuth||!1),be=JSON.parse(localStorage.appAuthTimestamp||!1),xe=localStorage.appApiUrl||"",Te=JSON.parse(localStorage.appUserId||!1),Le=localStorage.menuCurrent||P[0].page,Ee=localStorage.weeklyUserId||localStorage.apiUserId||!1,[H,K]=B();localStorage.weeklyStart&&H.setTime(localStorage.weeklyStart);localStorage.weeklyEnd&&K.setTime(localStorage.weeklyEnd);const Me=!1,Fe=localStorage.yearlyUserId||localStorage.apiUserId||!1,z=fe();localStorage.yearlyYear&&z.setTime(localStorage.yearlyYear);const Re=!1,Ye=JSON.parse(localStorage.yearlyDeltaSeconds||"{}"),Oe=JSON.parse(localStorage.yearlyDeltaDays||"{}"),Ne={},je=!1;var We=re({state(){return{appLoading:$e,appMessages:Ce,appAuth:Ue,appAuthTimestamp:be,appApiUrl:xe,appUserId:Te,menuItems:P,menuCurrent:Le,weeklyUserId:Ee,weeklyStart:H,weeklyEnd:K,weeklyTimestamp:Me,yearlyUserId:Fe,yearlyYear:z,yearlyTimestamp:Re,yearlyDeltaSeconds:Ye,yearlyDeltaDays:Oe,b24FileData:Ne,b24FileId:je}},actions:{async appLoaded(t){this.commit("appLoadingChange",!1)},appLogin(t,e){this.commit("appMessagesClear"),this.commit("appAuthChange",!0),this.commit("appAuthTimestampChange",new Date().getTime()),this.commit("appApiUrlChange",e.appApiUrl),this.commit("appUserIdChange",e.appUserId),this.commit("menuCurrentChange",t.state.menuItems[0].page)},appLogout(){this.commit("appMessagesClear"),this.commit("appAuthChange",!1),this.commit("appApiUrlChange",""),this.commit("appUserIdChange",!1)},appMesageShow(t,e){this.commit("appMessagesAdd",e)},appMesageClose(t,e){this.commit("appMessagesRemove",e)},menuChange(t,e){this.commit("menuCurrentChange",e)},weeklyFilterChange(t,e){t.state.weeklyTimestamp=Date.now(),e.weeklyUserId&&this.commit("weeklyUserIdChange",e.weeklyUserId),e.weeklyStart&&this.commit("weeklyStartChange",e.weeklyStart),e.weeklyEnd&&this.commit("weeklyEndChange",e.weeklyEnd)},yearlyFilterChange(t,e){t.state.yearlyTimestamp=Date.now(),e.yearlyUserId&&this.commit("yearlyUserIdChange",e.yearlyUserId),e.yearlyYear&&this.commit("yearlyYearChange",e.yearlyYear)},yearlyDeltaSecondsChange(t,e){let s=t.state.yearlyDeltaSeconds;s=s||{},s[e.userId]=s[e.userId]||{},s[e.userId][e.year]=s[e.userId][e.year]||{},e.value?s[e.userId][e.year][e.month]=e.value:delete s[e.userId][e.year][e.month],this.commit("yearlyDeltaSecondsChange",s)},yearlyDeltaDaysChange(t,e){let s=t.state.yearlyDeltaDays;s=s||{},s[e.userId]=s[e.userId]||{},s[e.userId][e.year]=s[e.userId][e.year]||{},e.value?s[e.userId][e.year][e.month]=e.value:delete s[e.userId][e.year][e.month],this.commit("yearlyDeltaDaysChange",s)}},mutations:{appLoadingChange(t,e){t.appLoading=e},appMessagesAdd(t,e){t.appMessages.push(e)},appMessagesRemove(t,e){t.appMessages.splice(e,1)},appMessagesClear(t){t.appMessages=[]},appAuthChange(t,e){t.appAuth=e,localStorage.appAuth=e},appAuthTimestampChange(t,e){t.appAuthTimestamp=e,localStorage.appAuthTimestamp=e},appApiUrlChange(t,e){t.appApiUrl=e,localStorage.appApiUrl=e},appUserIdChange(t,e){t.appUserId=e,localStorage.appUserId=e},menuCurrentChange(t,e){t.menuCurrent=e,localStorage.menuCurrent=e},weeklyUserIdChange(t,e){t.weeklyUserId=e,localStorage.weeklyUserId=e},weeklyStartChange(t,e){t.weeklyStart=e,localStorage.weeklyStart=e},weeklyEndChange(t,e){t.weeklyEnd=e,localStorage.weeklyEnd=e},yearlyUserIdChange(t,e){t.yearlyUserId=e,localStorage.yearlyUserId=e},yearlyYearChange(t,e){t.yearlyYear=e,localStorage.yearlyYear=e},yearlyDeltaSecondsChange(t,e){t.yearlyDeltaSeconds=e,localStorage.yearlyDeltaSeconds=JSON.stringify(e)},yearlyDeltaDaysChange(t,e){t.yearlyDeltaDays=e,localStorage.yearlyDeltaDays=JSON.stringify(e)},b24FileDataChange(t,e){t.b24FileData=e}}}),qe={install:t=>{t.directive("mask",{mounted:(e,s)=>{ne(s.value).mask(e)}})}};if(typeof window!="undefined"){let t=function(){var e=document.body,s=document.getElementById("__svg__icons__dom__");s||(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.style.position="absolute",s.style.width="0",s.style.height="0",s.id="__svg__icons__dom__",s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),s.innerHTML='<symbol viewBox="0 0 24 24"  id="icon-arrow"><path d="M8.512 4.43a.75.75 0 0 1 1.057.082l6 7a.75.75 0 0 1 0 .976l-6 7a.75.75 0 0 1-1.138-.976L14.012 12 8.431 5.488a.75.75 0 0 1 .08-1.057Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-date-add"><path d="M7 1.75a.75.75 0 0 1 .75.75v.763c.662-.013 1.391-.013 2.194-.013h4.112c.803 0 1.532 0 2.194.013V2.5a.75.75 0 0 1 1.5 0v.827c.26.02.506.045.739.076 1.172.158 2.121.49 2.87 1.238.748.749 1.08 1.698 1.238 2.87.05.375.084.784.107 1.23a.747.747 0 0 1 .019.46c.027.801.027 1.712.027 2.743v2.112c0 1.838 0 3.294-.153 4.433-.158 1.172-.49 2.121-1.238 2.87-.749.748-1.698 1.08-2.87 1.238-1.14.153-2.595.153-4.433.153H9.944c-1.838 0-3.294 0-4.433-.153-1.172-.158-2.121-.49-2.87-1.238-.748-.749-1.08-1.698-1.238-2.87-.153-1.14-.153-2.595-.153-4.433v-2.112c0-1.031 0-1.942.027-2.744a.75.75 0 0 1 .02-.46c.022-.445.056-.854.106-1.229.158-1.172.49-2.121 1.238-2.87.749-.748 1.698-1.08 2.87-1.238.233-.031.48-.056.739-.076V2.5A.75.75 0 0 1 7 1.75Zm-4.237 8c-.013.653-.013 1.396-.013 2.25v2c0 1.907.002 3.262.14 4.29.135 1.005.389 1.585.812 2.008.423.423 1.003.677 2.009.812 1.028.138 2.382.14 4.289.14h4c1.907 0 3.262-.002 4.29-.14 1.005-.135 1.585-.389 2.008-.812.423-.423.677-1.003.812-2.009.138-1.027.14-2.382.14-4.289v-2c0-.854 0-1.597-.013-2.25H2.763Zm18.405-1.5H2.832c.016-.19.035-.369.058-.54.135-1.005.389-1.585.812-2.008.423-.423 1.003-.677 2.009-.812 1.028-.138 2.382-.14 4.289-.14h4c1.907 0 3.262.002 4.29.14 1.005.135 1.585.389 2.008.812.423.423.677 1.003.812 2.009.023.17.042.35.058.539Zm-5.168 5a.75.75 0 0 1 .75.75v1.25H18a.75.75 0 0 1 0 1.5h-1.25V18a.75.75 0 0 1-1.5 0v-1.25H14a.75.75 0 0 1 0-1.5h1.25V14a.75.75 0 0 1 .75-.75Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-link"><path d="M15.729 3.884c1.434-1.44 3.532-1.47 4.693-.304 1.164 1.168 1.133 3.28-.303 4.72l-2.423 2.433a.75.75 0 0 0 1.062 1.059l2.424-2.433c1.911-1.919 2.151-4.982.303-6.838-1.85-1.857-4.907-1.615-6.82.304L9.819 7.692c-1.911 1.919-2.151 4.982-.303 6.837a.75.75 0 1 0 1.063-1.058c-1.164-1.168-1.132-3.28.303-4.72l4.848-4.867Z" /><path d="M14.485 9.47a.75.75 0 0 0-1.063 1.06c1.164 1.168 1.133 3.279-.303 4.72l-4.847 4.866c-1.435 1.44-3.533 1.47-4.694.304-1.164-1.168-1.132-3.28.303-4.72l2.424-2.433a.75.75 0 0 0-1.063-1.059l-2.424 2.433c-1.911 1.92-2.151 4.982-.303 6.838 1.85 1.858 4.907 1.615 6.82-.304l4.847-4.867c1.911-1.918 2.151-4.982.303-6.837Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-logout"><path d="M12 3.25a.75.75 0 0 1 0 1.5 7.25 7.25 0 0 0 0 14.5.75.75 0 0 1 0 1.5 8.75 8.75 0 1 1 0-17.5Z" /><path d="M16.47 9.53a.75.75 0 0 1 1.06-1.06l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H10a.75.75 0 0 1 0-1.5h8.19l-1.72-1.72Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-refresh"><path d="M2.93 11.2c.072-4.96 4.146-8.95 9.149-8.95a9.158 9.158 0 0 1 7.814 4.357.75.75 0 0 1-1.277.786 7.658 7.658 0 0 0-6.537-3.643c-4.185 0-7.575 3.328-7.648 7.448l.4-.397a.75.75 0 0 1 1.057 1.065l-1.68 1.666a.75.75 0 0 1-1.056 0l-1.68-1.666A.75.75 0 1 1 2.528 10.8l.403.4Zm16.856-.733a.75.75 0 0 1 1.055 0l1.686 1.666a.75.75 0 1 1-1.054 1.067l-.41-.405c-.07 4.965-4.161 8.955-9.18 8.955a9.197 9.197 0 0 1-7.842-4.356.75.75 0 1 1 1.277-.788 7.697 7.697 0 0 0 6.565 3.644c4.206 0 7.61-3.333 7.68-7.453l-.408.403a.75.75 0 1 1-1.055-1.067l1.686-1.666Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-settings"><path d="M12 8.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5ZM9.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z" /><path d="M11.975 1.25c-.445 0-.816 0-1.12.02a2.823 2.823 0 0 0-.907.19 2.75 2.75 0 0 0-1.489 1.488c-.145.35-.184.72-.2 1.122a.868.868 0 0 1-.415.731.868.868 0 0 1-.841-.005c-.356-.188-.696-.339-1.072-.389a2.75 2.75 0 0 0-2.033.545c-.25.192-.44.428-.617.691-.17.254-.356.575-.578.96l-.025.044c-.223.385-.408.706-.542.98-.14.286-.25.568-.29.88a2.75 2.75 0 0 0 .544 2.033c.231.301.532.52.872.734a.868.868 0 0 1 .426.726.868.868 0 0 1-.426.726c-.34.214-.64.433-.872.734a2.75 2.75 0 0 0-.545 2.033c.041.312.15.594.29.88.135.274.32.595.543.98l.025.044c.222.385.408.706.578.96.177.263.367.5.617.69a2.75 2.75 0 0 0 2.033.546c.376-.05.716-.2 1.072-.389a.867.867 0 0 1 .84-.005c.242.138.405.408.417.731.015.402.054.772.2 1.122a2.75 2.75 0 0 0 1.488 1.489c.29.12.59.167.907.188.304.021.675.021 1.12.021h.05c.445 0 .816 0 1.12-.02.318-.022.617-.069.907-.19a2.75 2.75 0 0 0 1.489-1.488c.145-.35.184-.72.2-1.122a.868.868 0 0 1 .415-.732.868.868 0 0 1 .841.006c.356.188.696.339 1.072.388a2.75 2.75 0 0 0 2.033-.544c.25-.192.44-.428.617-.691.17-.254.356-.575.578-.96l.025-.044c.223-.385.408-.706.542-.98.14-.286.25-.569.29-.88a2.75 2.75 0 0 0-.544-2.033c-.231-.301-.532-.52-.872-.734a.868.868 0 0 1-.426-.726c0-.278.152-.554.426-.726.34-.214.64-.433.872-.734a2.75 2.75 0 0 0 .545-2.033 2.826 2.826 0 0 0-.29-.88c-.135-.274-.32-.595-.543-.98l-.025-.044c-.222-.385-.408-.706-.578-.96a2.823 2.823 0 0 0-.617-.69 2.75 2.75 0 0 0-2.033-.546c-.376.05-.716.2-1.072.389a.868.868 0 0 1-.84.005.868.868 0 0 1-.417-.731c-.015-.402-.054-.772-.2-1.122a2.75 2.75 0 0 0-1.488-1.489c-.29-.12-.59-.167-.907-.188-.304-.021-.675-.021-1.12-.021h-.05Zm-1.453 1.595c.077-.032.194-.061.435-.078.247-.017.567-.017 1.043-.017s.796 0 1.043.017c.241.017.358.046.435.078.307.127.55.37.677.677.04.096.073.247.086.604.03.792.439 1.555 1.165 1.974.726.42 1.591.392 2.292.022.316-.167.463-.214.567-.227a1.25 1.25 0 0 1 .924.247c.066.051.15.138.285.338.139.206.299.483.537.895.238.412.397.69.506.912.107.217.14.333.15.416a1.25 1.25 0 0 1-.247.924c-.064.083-.178.187-.48.377-.672.422-1.128 1.158-1.128 1.996 0 .838.456 1.574 1.128 1.996.302.19.416.294.48.377.202.263.29.595.247.924-.01.083-.044.2-.15.416-.109.223-.268.5-.506.912-.238.412-.399.689-.537.895-.135.2-.219.287-.285.338a1.25 1.25 0 0 1-.924.247c-.104-.013-.25-.06-.567-.227-.7-.37-1.566-.398-2.292.021-.726.42-1.135 1.183-1.165 1.975-.013.357-.046.508-.086.604a1.25 1.25 0 0 1-.677.677c-.077.032-.194.061-.435.078-.247.017-.567.017-1.043.017s-.796 0-1.043-.017c-.241-.017-.358-.046-.435-.078a1.25 1.25 0 0 1-.677-.677c-.04-.096-.073-.247-.086-.604-.03-.792-.439-1.555-1.165-1.974-.726-.42-1.591-.392-2.292-.022-.316.167-.463.214-.567.227a1.25 1.25 0 0 1-.924-.247c-.066-.051-.15-.138-.285-.338a17.055 17.055 0 0 1-.537-.895c-.238-.412-.397-.69-.506-.912-.107-.217-.14-.333-.15-.416a1.25 1.25 0 0 1 .247-.924c.064-.083.178-.187.48-.377.672-.422 1.128-1.158 1.128-1.996 0-.838-.456-1.574-1.128-1.996-.302-.19-.416-.294-.48-.377a1.25 1.25 0 0 1-.247-.924c.01-.083.044-.2.15-.416.109-.223.268-.5.506-.912.238-.412.399-.689.537-.895.135-.2.219-.287.285-.338a1.25 1.25 0 0 1 .924-.247c.104.013.25.06.567.227.7.37 1.566.398 2.292-.022.726-.419 1.135-1.182 1.165-1.974.013-.357.046-.508.086-.604.127-.307.37-.55.677-.677Z" /></symbol><symbol viewBox="0 0 24 24"  id="icon-tasks"><path d="m16.394 2.021.066.018c1.1.295 1.971.528 2.656.776.701.253 1.273.542 1.744.983a4.75 4.75 0 0 1 1.378 2.389c.147.628.112 1.268-.02 2.001-.127.718-.36 1.589-.655 2.688l-.536 1.999c-.294 1.099-.528 1.97-.775 2.655-.254.701-.543 1.273-.984 1.744a4.75 4.75 0 0 1-2.302 1.358 4.75 4.75 0 0 1-1.106 1.567c-.471.441-1.043.73-1.744.984-.685.248-1.556.481-2.655.776l-.067.018c-1.1.294-1.97.527-2.688.656-.733.131-1.373.166-2.002.02a4.75 4.75 0 0 1-2.388-1.38c-.44-.47-.73-1.042-.984-1.743-.247-.685-.48-1.556-.775-2.656l-.536-1.998c-.294-1.1-.528-1.97-.656-2.688-.131-.733-.166-1.373-.02-2.002a4.75 4.75 0 0 1 1.38-2.388c.47-.44 1.042-.73 1.743-.984.685-.247 1.556-.48 2.655-.775l.034-.01.751-.2c.392-1.399.736-2.388 1.408-3.105a4.75 4.75 0 0 1 2.388-1.379c.629-.146 1.268-.111 2.002.02.717.128 1.588.362 2.688.656ZM7.455 7.503c-1.093.293-1.876.505-2.478.722-.61.22-.967.424-1.227.668a3.25 3.25 0 0 0-.944 1.634c-.08.348-.079.76.036 1.397.115.647.332 1.457.637 2.597l.518 1.932c.305 1.14.523 1.95.746 2.567.22.61.424.968.668 1.228a3.25 3.25 0 0 0 1.634.944c.347.08.76.078 1.397-.036.647-.115 1.457-.332 2.597-.637 1.14-.306 1.95-.523 2.568-.747.609-.22.967-.424 1.227-.667.138-.13.263-.27.376-.419a10.077 10.077 0 0 1-.554-.095c-.672-.134-1.48-.35-2.475-.617l-.058-.015c-1.099-.295-1.97-.528-2.655-.776-.701-.253-1.273-.542-1.744-.983a4.75 4.75 0 0 1-1.379-2.389c-.146-.628-.111-1.268.02-2.002.128-.717.362-1.588.656-2.687l.434-1.62Zm5.987-4.661c-.638-.115-1.05-.117-1.397-.036a3.25 3.25 0 0 0-1.634.944c-.436.465-.705 1.185-1.171 2.893-.076.278-.156.577-.243.902l-.518 1.932c-.305 1.14-.522 1.95-.637 2.597-.115.637-.117 1.05-.036 1.397a3.25 3.25 0 0 0 .944 1.634c.26.244.618.447 1.227.668.618.223 1.428.44 2.568.746 1.025.275 1.785.478 2.403.6.615.123 1.033.153 1.375.111.075-.01.146-.022.216-.038a3.25 3.25 0 0 0 1.634-.944c.244-.26.448-.618.668-1.227.223-.618.44-1.428.746-2.568l.518-1.932c.305-1.14.522-1.95.637-2.597.114-.637.117-1.05.036-1.397a3.25 3.25 0 0 0-.944-1.634c-.26-.244-.618-.447-1.227-.668-.619-.223-1.428-.44-2.568-.746-1.14-.305-1.95-.522-2.597-.637Z" /></symbol>',e.insertBefore(s,e.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}var _=(t,e)=>{const s=t.__vccOpts||t;for(const[l,r]of e)s[l]=r;return s};const Ve={data(){return{items:this.$store.state.appMessages}},methods:{close(t){this.$store.dispatch("appMesageClose",t)}}},Ze={class:"notify"},Be=["onClick"],Pe={class:"notify__text"};function Ge(t,e,s,l,r,a){return i(),o("div",Ze,[(i(!0),o(A,null,S(r.items,(n,p)=>(i(),o("div",{key:p,class:v(["notify__item",n.type?"is-"+n.type:""]),onClick:u=>a.close(p)},[c("div",Pe,h(n.text),1)],10,Be))),128))])}var Je=_(Ve,[["render",Ge]]),He="/weekly/assets/1-2.e3cc93dd.png",Ke="/weekly/assets/1-3.c0003914.png",ze="/weekly/assets/1-4.f24f91e8.png",Qe="/weekly/assets/1-6.a45e1305.png",Xe="/weekly/assets/2-2.cf23ad7c.png",et="/weekly/assets/1-6.a45e1305.png";const tt={data(){return{appApiUrl:this.$store.state.appApiUrl||"",activeInstruction:!1}},mounted(){le.bind(this.$refs.container,"[data-fancybox]",{Toolbar:{display:{left:[],middle:[],right:["close"]}}})},methods:{async login(){let t=this.checkUrlFormat(this.appApiUrl),e=await this.checkUrlAccess(this.appApiUrl);t&&e.status?this.$store.dispatch("appLogin",{appApiUrl:this.appApiUrl,appUserId:this.getUserIdFromUrl(this.appApiUrl)}):(t||this.$store.dispatch("appMesageShow",{text:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0441\u0442\u0440\u043E\u043A\u0438 api",type:"error"}),e.status||this.$store.dispatch("appMesageShow",{text:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 "+e.result,type:"error"}))},checkUrlFormat(t){return new RegExp("https?:\\/\\/([^\\.\\/]+\\.)+[^\\.\\/]+\\/rest\\/\\d+\\/[A-z0-9]+\\/").test(t)},async checkUrlAccess(t){return ve(t)},getUserIdFromUrl(t){return(t.match(/rest\/(\d+)/)||[])[1]||!1},toggleInstruction(t){this.activeInstruction==t?this.activeInstruction=!1:this.activeInstruction=t}}},st={class:"app-auth"},at={class:"app-auth__form"},rt=c("label",{class:"app-auth__label"},"\u0412\u0435\u0431\u0445\u0443\u043A \u0434\u043B\u044F \u0432\u044B\u0437\u043E\u0432\u0430 rest api:",-1),nt={class:"app-auth__footer"},lt={class:"app-auth__links"},it=c("br",null,null,-1),ot=W('<div class="app-auth__step"><div class="app-auth__text"> 1. \u041F\u0435\u0440\u0435\u0445\u043E\u0434\u0438\u043C \u043F\u043E <a href="https://utlab.bitrix24.ru/devops/section/standard/" target="_blank"> \u0441\u0441\u044B\u043B\u043A\u0435 </a></div><div class="app-auth__img"></div></div><div class="app-auth__step"><div class="app-auth__text"> 2. \u0412\u044B\u0431\u0438\u0440\u0430\u0435\u043C <b>&quot;\u0412\u0445\u043E\u0434\u044F\u0449\u0438\u0439 \u0432\u0435\u0431\u0445\u0443\u043A&quot;</b></div><div class="app-auth__img"><img src="'+He+'" data-fancybox></div></div><div class="app-auth__step"><div class="app-auth__text"> 3. \u0423\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u043A\u0430\u043A\u043E\u0435-\u043D\u0438\u0431\u0443\u0434\u044C \u043F\u043E\u043D\u044F\u0442\u043D\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 </div><div class="app-auth__img"><img src="'+Ke+'" data-fancybox></div></div><div class="app-auth__step"><div class="app-auth__text"> 4. \u0412 \u0431\u043B\u043E\u043A\u0435 <b>&quot;\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u043F\u0440\u0430\u0432&quot;</b> \u0432\u044B\u0431\u0438\u0440\u0430\u0435\u043C: <br><i> \u0417\u0430\u0434\u0430\u0447\u0438 (task) <span style="color:red;"> \u0438\u043C\u0435\u043D\u043D\u043E &quot;task&quot;, \u0431\u0435\u0437 &quot;s&quot; \u043D\u0430 \u043A\u043E\u043D\u0446\u0435 </span></i><br><i>\u0420\u0430\u0431\u043E\u0447\u0438\u0435 \u0433\u0440\u0443\u043F\u043F\u044B (sonet_group)</i><br><i>\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 (user)</i></div><div class="app-auth__img"><img src="'+ze+'" data-fancybox></div></div><div class="app-auth__step"><div class="app-auth__text"> 5. \u041D\u0430\u0436\u0438\u043C\u0430\u0435\u043C <b>&quot;\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C&quot;</b></div></div><div class="app-auth__step"><div class="app-auth__text"> 6. \u041A\u043E\u043F\u0438\u0440\u0443\u0435\u043C \u0441\u0442\u0440\u043E\u0447\u043A\u0443 \u0438\u0437 \u043F\u043E\u043B\u044F <b>&quot;\u0412\u0435\u0431\u0445\u0443\u043A \u0434\u043B\u044F \u0432\u044B\u0437\u043E\u0432\u0430 rest api&quot;</b></div><div class="app-auth__img"><img src="'+Qe+'" data-fancybox></div></div>',6),ct=[ot],pt=W('<div class="app-auth__step"><div class="app-auth__text"> 1. \u041F\u0435\u0440\u0435\u0445\u043E\u0434\u0438\u043C \u043F\u043E <a href="https://utlab.bitrix24.ru/devops/list/" target="_blank"> \u0441\u0441\u044B\u043B\u043A\u0435 </a></div><div class="app-auth__img"></div></div><div class="app-auth__step"><div class="app-auth__text"> 2. \u041D\u0430\u0445\u043E\u0434\u0438\u043C \u043D\u0443\u0436\u043D\u0443\u044E \u0438\u043D\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044E \u0438 \u043D\u0430\u0436\u0438\u043C\u0430\u0435\u043C <b>&quot;\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C&quot;</b></div><div class="app-auth__img"><img src="'+Xe+'" data-fancybox></div></div><div class="app-auth__step"><div class="app-auth__text"> 3. \u041A\u043E\u043F\u0438\u0440\u0443\u0435\u043C \u0441\u0442\u0440\u043E\u0447\u043A\u0443 \u0438\u0437 \u043F\u043E\u043B\u044F <b>&quot;\u0412\u0435\u0431\u0445\u0443\u043A \u0434\u043B\u044F \u0432\u044B\u0437\u043E\u0432\u0430 rest api&quot;</b></div><div class="app-auth__img"><img src="'+et+'" data-fancybox></div></div>',3),ut=[pt];function dt(t,e,s,l,r,a){return i(),o("div",st,[c("div",at,[rt,x(c("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>r.appApiUrl=n),class:"app-auth__input",type:"text"},null,512),[[ie,r.appApiUrl,void 0,{trim:!0}]]),c("div",nt,[c("button",{class:"app-auth__button",onClick:e[1]||(e[1]=n=>a.login())},"\u0412\u043E\u0439\u0442\u0438")])]),c("div",lt,[c("span",{class:v(["app-auth__link",{"is-active":r.activeInstruction==1}]),onClick:e[2]||(e[2]=n=>a.toggleInstruction(1))}," \u041F\u043E\u043B\u0443\u0447\u0430\u0435\u043C \u0432\u0435\u0431\u0445\u0443\u043A \u0432 \u043F\u0435\u0440\u0432\u044B\u0439 \u0440\u0430\u0437 ",2),it,c("span",{class:v(["app-auth__link",{"is-active":r.activeInstruction==2}]),onClick:e[3]||(e[3]=n=>a.toggleInstruction(2))}," \u0420\u0430\u043D\u0435\u0435 \u043F\u043E\u043B\u0443\u0447\u0430\u043B\u0438 \u0432\u0435\u0431\u0445\u0443\u043A ",2)]),c("div",{class:v(["app-auth__instruction",{"is-active":r.activeInstruction==1}])},ct,2),c("div",{class:v(["app-auth__instruction",{"is-active":r.activeInstruction==2}])},ut,2)])}var ht=_(tt,[["render",dt]]);const _t={},yt={class:"app-name"};function mt(t,e){return i(),o("div",yt,"\u041E\u0442\u0447\u0435\u0442\u044B")}var gt=_(_t,[["render",mt]]);const ft={computed:{items(){return this.$store.state.menuItems},active(){return this.$store.state.menuCurrent||this.items[0].page}},methods:{change(t){this.$store.dispatch("menuChange",t.page)}}},vt={class:"app-menu"},kt=["onClick"],Dt={key:1};function It(t,e,s,l,r,a){return i(),o("nav",vt,[(i(!0),o(A,null,S(a.items,(n,p)=>T(t.$slots,"default",{key:p},()=>[n.name!="hr"?(i(),o("span",{key:0,class:v(["app-menu__item",{"is-current":n.page==a.active}]),onClick:u=>a.change(n)},h(n.name),11,kt)):(i(),o("hr",Dt))])),128))])}var wt=_(ft,[["render",It]]);const At={props:{prefix:{type:String,default:"icon"},name:{type:String,required:!0}},setup(t){return{symbolId:`#${t.prefix}-${t.name}`}}},St={"aria-hidden":"true"},$t=["href"];function Ct(t,e,s,l,r,a){return i(),o("svg",St,[c("use",{href:l.symbolId,fill:"currentColor"},null,8,$t)])}var U=_(At,[["render",Ct],["__scopeId","data-v-09f22faa"]]);const Ut={components:{SvgIcon:U},data(){return{result:!1}},computed:{apiUrl(){return this.$store.state.appApiUrl}},async mounted(){const t=await this.getResult();t.status?this.result=t.result:this.$store.dispatch("appMesageShow",{type:"error",text:`getUserInfo(): \r
 `+t.result})},methods:{settings(){this.$store.dispatch("menuChange","PageAppSettings")},logout(){this.$store.dispatch("appLogout")},async getResult(){return this.apiUrl?await Ie(this.apiUrl):!1}}},bt={class:"app-user"},xt=["title"],Tt={key:1,class:"app-user__label"};function Lt(t,e,s,l,r,a){const n=d("SvgIcon");return i(),o("div",bt,[r.result?(i(),o("div",{key:0,class:"app-user__label",title:r.result.ID},h(r.result.NAME),9,xt)):(i(),o("div",Tt,"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C")),y(n,{name:"logout",class:"app-user__button",title:"\u0412\u044B\u0439\u0442\u0438",onClick:a.logout},null,8,["onClick"])])}var Et=_(Ut,[["render",Lt]]);const Mt={props:["link","target"]},Ft=["href","target"],Rt={key:1};function Yt(t,e,s,l,r,a){return s.link?(i(),o("a",{key:0,href:s.link,target:s.target},[T(t.$slots,"default")],8,Ft)):(i(),o("span",Rt,[T(t.$slots,"default")]))}var Ot=_(Mt,[["render",Yt]]);const Nt={components:{LinkOrSpan:Ot},props:["task"],data(){return{link:this.makeLink(this.task.id4user)}},methods:{formatTime:C,makeLink(t){return t?V(this.$store.state.appApiUrl)+`/company/personal/user/${this.$store.state.appUserId}/tasks/task/view/${t}/`:!1}}},jt={class:"report-weekly-task"},Wt={class:"report-weekly-task__name"},qt={class:"report-weekly-task__time mono"};function Vt(t,e,s,l,r,a){const n=d("LinkOrSpan");return i(),o("div",jt,[y(n,{class:"report-weekly-task__id mono",link:r.link,target:"_blank"},{default:oe(()=>[k(h(s.task.id),1)]),_:1},8,["link"]),c("span",Wt,h(" - "+s.task.name),1),c("span",qt," ("+h(a.formatTime(s.task.time))+") ",1)])}var Zt=_(Nt,[["render",Vt]]);const Bt={components:{SvgIcon:U,WeeklyTask:Zt},props:["group","collapsedAll"],emits:["checked"],data(){return{selected:!1,collapsed:!1,link:this.makeLink(this.group.id4user)}},watch:{collapsedAll(){this.toggle(this.collapsedAll)}},methods:{formatTime:C,toggle(t){this.collapsed=t!==void 0?t:!this.collapsed},makeLink(t){return t?V(this.$store.state.appApiUrl)+`/workgroups/group/${t}/`:!1}}},Pt={class:"weekly-group__title"},Gt={class:"weekly-group__time mono"},Jt=["value"],Ht={class:"weekly-group__tasks"};function Kt(t,e,s,l,r,a){const n=d("SvgIcon"),p=d("WeeklyTask");return i(),o("div",{class:v(["weekly-group",{"is-collapse":r.collapsed}])},[c("div",Pt,[c("span",{class:"weekly-group__name",onClick:e[0]||(e[0]=u=>a.toggle())},[y(n,{name:"arrow",class:"weekly-group__toggle"}),k(" "+h(s.group.name),1)]),c("span",Gt," ("+h(a.formatTime(s.group.time))+") ",1),x(c("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>r.selected=u),class:"weekly-group__check",type:"checkbox",value:s.group.id,onInput:e[2]||(e[2]=u=>t.$emit("checked",u.target.value,u.target.checked))},null,40,Jt),[[ce,r.selected]])]),c("div",Ht,[(i(!0),o(A,null,S(s.group.tasks,u=>(i(),I(p,{key:u.id,task:u},null,8,["task"]))),128))])],2)}var zt=_(Bt,[["render",Kt]]);const Qt={components:{SvgIcon:U,WeeklyGroup:zt},data(){return{isLoading:!0,isFirstLoading:!0,apiUrl:this.$store.state.appApiUrl,result:[],selectedGroups:[],collapsedAll:!1}},computed:{isAppLoading(){return this.$store.state.appLoading},filter(){return{userId:this.$store.state.weeklyUserId||this.$store.state.appUserId,start:new Date(this.$store.state.weeklyStart),end:new Date(this.$store.state.weeklyEnd),hash:this.$store.state.weeklyTimestamp}},isEmpty(){return!Object.keys(this.result).length},summChecked(){return Object.values(this.result).reduce((t,e)=>t+=this.selectedGroups[e.id]?e.time:0,0)},summTotal(){return Object.values(this.result).reduce((t,e)=>t+=e.time,0)}},async mounted(){this.isAppLoading||(this.result=await this.getResult())},watch:{async isAppLoading(){this.result=await this.getResult()},async filter(){this.result=await this.getResult()},result(){this.isLoading=!1,this.isFirstLoading=!1}},methods:{formatDate:b,formatTime:C,async getResult(){if(!this.apiUrl||!this.filter.userId)return{};this.isLoading=!0;let[t,e,s]=await this.getApiData();s=j(s,"ID"),e=j(e,"id");let l={};return t.forEach(r=>{var g;let a=r.TASK_ID||0,n=e[a]||!1,p=n.groupId||0,u=s[p]||!1,m=l[p]||{id:p||0,id4user:u.ID||!1,name:(u==null?void 0:u.NAME)||((g=n==null?void 0:n.group)==null?void 0:g.name)||"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0433\u0440\u0443\u043F\u043F\u0435",time:0,tasks:{}};m.time+=parseInt(r.SECONDS);let D=m.tasks[a]||{id:a||0,id4user:n.id||!1,name:n.title||"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0437\u0430\u0434\u0430\u0447\u0435",time:0};D.time+=parseInt(r.SECONDS),l[p]=m,l[p].tasks[a]=D}),l},async getApiData(){let t=[],e=[],s=[];return t=await G(this.apiUrl,{USER_ID:this.filter.userId,">=CREATED_DATE":b(this.filter.start)+" 00:00:00","<=CREATED_DATE":b(this.filter.end)+" 23:59:59"}),t.length&&(e=await ke(this.apiUrl,{ID:t.map(l=>l.TASK_ID)})),e.length&&(s=await De(this.apiUrl,{ID:e.map(l=>l.groupId)})),[t,e,s]},selectGroup(t,e){this.selectedGroups[t]=e},toggleAll(){this.collapsedAll=!this.collapsedAll}}},Xt={key:0},es={key:1,class:"report-weekly__body"},ts={key:2,class:"report-weekly__aside"},ss={key:0},as=k(" \u0412\u0441\u0435\u0433\u043E \u0437\u0430\u0442\u0440\u0430\u0447\u0435\u043D\u043E: "),rs={class:"mono"},ns={key:1},ls=k(" \u0421\u0443\u043C\u043C\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445: "),is={class:"mono"},os={key:3,class:"report-weekly__empty"};function cs(t,e,s,l,r,a){const n=d("SvgIcon"),p=d("WeeklyGroup");return i(),o("div",{class:v(["report-weekly",{"is-loading":!a.isAppLoading&&r.isLoading}])},[a.isAppLoading?(i(),o("div",Xt,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430")):f("",!0),!a.isAppLoading&&!a.isEmpty&&!r.isFirstLoading?(i(),o("div",es,[c("span",{class:v(["report-weekly__toggle",{"is-collapse":r.collapsedAll}]),onClick:e[0]||(e[0]=(...u)=>a.toggleAll&&a.toggleAll(...u))},[y(n,{name:"arrow",class:"report-weekly__toggle-arrow"}),c("span",null,h(r.collapsedAll?"\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0441\u0435":"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0441\u0435"),1)],2),(i(!0),o(A,null,S(r.result,u=>(i(),I(p,{key:u.id,group:u,collapsedAll:r.collapsedAll,onChecked:a.selectGroup},null,8,["group","collapsedAll","onChecked"]))),128))])):f("",!0),!a.isAppLoading&&!a.isEmpty?(i(),o("div",ts,[r.isFirstLoading?f("",!0):(i(),o("div",ss,[c("b",null,[as,c("span",rs,h(a.formatTime(a.summTotal)),1)])])),!r.isFirstLoading&&a.summChecked?(i(),o("div",ns,[ls,c("span",is,h(a.formatTime(a.summChecked)),1)])):f("",!0)])):f("",!0),!a.isAppLoading&&a.isEmpty&&!r.isFirstLoading?(i(),o("div",os," \u0414\u0430\u043D\u043D\u044B\u0445 \u043D\u0435\u0442 ")):f("",!0)],2)}var ps=_(Qt,[["render",cs]]);const us={props:["value"],emits:["changeUser"],data(){return{apiUrl:this.$store.state.appApiUrl,userId:this.value||this.$store.state.appUserId,users:[]}},async created(){this.users=await this.getUsers()},methods:{async getUsers(){return this.apiUrl?await we(this.apiUrl):[]},changeUser(t){this.$emit("changeUser",t.target.value)}}},ds=["value"];function hs(t,e,s,l,r,a){return r.users.length>1?x((i(),o("select",{key:0,"onUpdate:modelValue":e[0]||(e[0]=n=>r.userId=n),onChange:e[1]||(e[1]=(...n)=>a.changeUser&&a.changeUser(...n))},[(i(!0),o(A,null,S(r.users,n=>(i(),o("option",{key:n.ID,value:n.ID},h(n.LAST_NAME)+" "+h(n.NAME)+" ("+h(n.ID)+") ",9,ds))),128))],544)),[[pe,r.userId]]):f("",!0)}var Q=_(us,[["render",hs]]);const _s={props:["value"],emits:["changeDate"],data(){return{start:this.value[0]||this.$store.state.weeklyStart,end:this.value[1]||this.$store.state.weeklyEnd}},mounted(){const t=this;new q(this.$refs.calendar,{range:!0,multipleDatesSeparator:" - ",selectedDates:[this.start,this.end],buttons:this.getBtns(),toggleSelected:!1,onSelect(e){e.date.length==2&&(e.datepicker.hide(),t.$emit("changeDate",e.date))}})},methods:{getBtns(){return[{content:"\u0414\u0435\u043D\u044C",tagName:"span",onClick:t=>{let e=me();t.selectDate(e),t.setViewDate(e[0])}},{content:"\u041D\u0435\u0434\u0435\u043B\u044F",tagName:"span",onClick:t=>{let e=B();t.selectDate(e),t.setViewDate(e[0])}},{content:"\u041C\u0435\u0441\u044F\u0446",tagName:"span",onClick:t=>{let e=ge();t.selectDate(e),t.setViewDate(e[0])}}]}}},ys={ref:"calendar",type:"text",readonly:""};function ms(t,e,s,l,r,a){return i(),o("input",ys,null,512)}var gs=_(_s,[["render",ms]]);const fs={components:{SvgIcon:U,InputUsers:Q,InputWeeklyCalendar:gs},methods:{changeUser(t){this.$store.dispatch("weeklyFilterChange",{weeklyUserId:t})},changeDate(t){this.$store.dispatch("weeklyFilterChange",{weeklyStart:t[0].getTime(),weeklyEnd:t[1].getTime()||t[0].getTime()})},refreshData(){this.$store.dispatch("weeklyFilterChange",{})}}},vs={class:"app-filter"},ks=c("div",{class:"app-filter__spacer"},null,-1);function Ds(t,e,s,l,r,a){const n=d("InputUsers"),p=d("InputWeeklyCalendar"),u=d("SvgIcon");return i(),o("div",vs,[y(n,{class:"app-filter__item",value:t.$store.state.weeklyUserId,onChangeUser:a.changeUser},null,8,["value","onChangeUser"]),y(p,{class:"app-filter__item",value:[this.$store.state.weeklyStart,this.$store.state.weeklyEnd],onChangeDate:a.changeDate},null,8,["value","onChangeDate"]),ks,y(u,{name:"refresh",class:"app-filter__btn",title:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",onClick:a.refreshData},null,8,["onClick"])])}var Is=_(fs,[["render",Ds]]);const ws={components:{ReportWeekly:ps,ReportWeeklyFilter:Is}};function As(t,e,s,l,r,a){const n=d("ReportWeeklyFilter"),p=d("ReportWeekly");return T(t.$slots,"default",{},()=>[y(n),y(p)])}var Ss=_(ws,[["render",As]]);const $s={props:["day"],methods:{formatTime:C}};function Cs(t,e,s,l,r,a){return i(),o("div",{class:v(["yearly-day mono",{"is-off":s.day.off}])},[k(h(s.day.date)+" ",1),c("span",null,"("+h(s.day.day)+")",1),k(" - "+h(a.formatTime(s.day.seconds)),1)],2)}var Us=_($s,[["render",Cs]]);const bs={components:{SvgIcon:U,YearlyDay:Us},props:["month"],data(){return{userId:this.$store.state.yearlyUserId||this.$store.state.appUserId,opened:!1,deltaSeconds:this.month.secondsDelta||0,deltaDays:this.month.daysDelta||0}},computed:{average(){return((this.month.seconds-this.deltaSeconds)/3600/(this.month.days-this.deltaDays)).toFixed(2)}},watch:{month(){this.deltaSeconds=this.month.secondsDelta||0,this.deltaDays=this.month.daysDelta||0}},methods:{formatTime:C,unformatTime:Z,toggle(){this.opened=!this.opened},deltaSecondsChange(t){this.deltaSeconds=parseFloat(this.unformatTime(t.target.value))||0,this.$store.dispatch("yearlyDeltaSecondsChange",{userId:this.userId,year:this.month.year,month:this.month.i,value:this.deltaSeconds})},deltaDaysChange(t){this.deltaDays=parseFloat(t.target.value)||0,this.$store.dispatch("yearlyDeltaDaysChange",{userId:this.userId,year:this.month.year,month:this.month.i,value:this.deltaDays})}}},xs={class:"yearly-month__result mono"},Ts={class:"yearly-month__time"},Ls=["value"],Es=k(" / "),Ms={class:"yearly-month__days"},Fs=["value"],Rs=k(" = "),Ys={class:"yearly-month__average"},Os={class:"yearly-month__daily"};function Ns(t,e,s,l,r,a){const n=d("SvgIcon"),p=d("YearlyDay"),u=ue("mask");return i(),o("div",{class:v(["yearly-month",{"is-open":r.opened}])},[c("div",{class:"yearly-month__name",onClick:e[0]||(e[0]=(...m)=>a.toggle&&a.toggle(...m))},[y(n,{name:"arrow",class:"yearly-month__toggle"}),k(" "+h(s.month.name),1)]),c("div",xs,[c("label",Ts,[k(h(a.formatTime(s.month.seconds))+" ",1),x(c("input",{class:"yearly-month__delta",type:"text",value:r.deltaSeconds>0?a.formatTime(r.deltaSeconds):"",onChange:e[1]||(e[1]=(...m)=>a.deltaSecondsChange&&a.deltaSecondsChange(...m))},null,40,Ls),[[u,{regex:"[0-9]*:[0-5][0-9]:[0-5][0-9]",numericInput:!0}]])]),Es,c("label",Ms,[k(h(s.month.days)+" ",1),x(c("input",{class:"yearly-month__delta",type:"text",value:r.deltaDays>0?r.deltaDays:"",onChange:e[2]||(e[2]=(...m)=>a.deltaDaysChange&&a.deltaDaysChange(...m))},null,40,Fs),[[u,{regex:"[0-9]*[.,]?[0-9]*",numericInput:!0}]])]),Rs,c("span",Ys,h(a.average),1)]),c("div",Os,[(i(!0),o(A,null,S(s.month.daily,(m,D)=>(i(),I(p,{key:D,day:m},null,8,["day"]))),128))])],2)}var js=_(bs,[["render",Ns]]);const Ws={components:{YearlyMonth:js},data(){return{isLoading:!0,isFirstLoading:!0,apiUrl:this.$store.state.appApiUrl,result:{},months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],days:["\u0432\u0441","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"]}},computed:{isAppLoading(){return this.$store.state.appLoading},filter(){return{userId:this.$store.state.yearlyUserId||this.$store.state.appUserId,year:new Date(this.$store.state.yearlyYear),hash:this.$store.state.yearlyTimestamp}},deltaSeconds(){return this.$store.state.b24FileData.yearlyDeltaSeconds||this.$store.state.yearlyDeltaSeconds||{}},deltaDays(){return this.$store.state.b24FileData.yearlyDeltaDays||this.$store.state.yearlyDeltaDays||{}},totalSeconds(){return Object.values(this.result).reduce((t,e)=>t+=e.seconds,0)},totalDeltaSeconds(){var e,s;let t=((s=(e=this.deltaSeconds)==null?void 0:e[this.filter.userId])==null?void 0:s[this.filter.year.getFullYear()])||{};return Object.values(t).reduce((l,r)=>l+=E(r),0)},totalDays(){return Object.values(this.result).reduce((t,e)=>t+=E(e.days),0)},totalDeltaDays(){var e,s;let t=((s=(e=this.deltaDays)==null?void 0:e[this.filter.userId])==null?void 0:s[this.filter.year.getFullYear()])||{};return Object.values(t).reduce((l,r)=>l+=E(r),0)}},async mounted(){this.isAppLoading||(this.result=await this.getResult())},watch:{async isAppLoading(){this.result=await this.getResult()},async filter(){this.result=await this.getResult()},result(){this.isLoading=!1,this.isFirstLoading=!1}},methods:{formatDate:b,formatTime:C,unformatTime:Z,async getResult(){var a,n,p,u,m,D;if(!this.apiUrl||!this.filter.userId)return{};this.isLoading=!0;let t={},e=this.filter.year.getFullYear(),s=await Ae(e),l=0,r=await G(this.apiUrl,{USER_ID:this.filter.userId,">=CREATED_DATE":"01.01."+e+" 00:00:00","<=CREATED_DATE":"31.12."+e+" 23:59:59"});for(let g=0;g<12;g++){let $=32-new Date(e,g,32).getDate(),M=s.slice(l,l+=$).split("");t[g]={i:g,name:this.months[g],year:e,days:M.filter(w=>w==0).length,daysDelta:parseFloat((p=(n=(a=this.deltaDays)==null?void 0:a[this.filter.userId])==null?void 0:n[e])==null?void 0:p[g])||0,seconds:0,secondsDelta:parseFloat((D=(m=(u=this.deltaSeconds)==null?void 0:u[this.filter.userId])==null?void 0:m[e])==null?void 0:D[g])||0,daily:{}};for(let w=1;w<=$;w++){let F=new Date(e,g,w);t[g].daily[w]={date:b(F),day:this.days[F.getDay()],off:M[w-1]!=0,seconds:0}}}return r.forEach(g=>{let $=new Date(g.CREATED_DATE);t[$.getMonth()].seconds+=parseInt(g.SECONDS),t[$.getMonth()].daily[$.getDate()].seconds+=parseInt(g.SECONDS)}),t}}},qs={key:0},Vs={key:1,class:"report-yearly__body"},Zs={key:2,class:"report-yearly__aside"},Bs={key:0,class:"report-yearly__summary"},Ps=k(" \u0420\u0430\u0431\u043E\u0447\u0435\u0435 \u0432\u0440\u0435\u043C\u044F: "),Gs={class:"mono"},Js={key:0,class:"mono"},Hs={key:1,class:"report-yearly__summary"},Ks=k(" \u0420\u0430\u0431\u043E\u0447\u0438\u0435 \u0434\u043D\u0438: "),zs={class:"mono"},Qs={key:0,class:"mono"},Xs=c("p",null," \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0440\u0430\u0431\u043E\u0447\u0438\u0445 \u0434\u043D\u0435\u0439\u2060/\u2060\u0447\u0430\u0441\u043E\u0432 \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u043A\u0440\u0430\u0442\u0438\u0442\u044C \u043A\u043B\u0438\u043A\u043D\u0443\u0432 \u043F\u043E \u0434\u043D\u044F\u043C\u2060/\u2060\u0447\u0430\u0441\u0430\u043C \u0432 \u043D\u0443\u0436\u043D\u043E\u043C \u043C\u0435\u0441\u044F\u0446\u0435 ",-1);function ea(t,e,s,l,r,a){const n=d("YearlyMonth");return i(),o("div",{class:v(["report-yearly",{"is-loading":!a.isAppLoading&&r.isLoading}])},[a.isAppLoading?(i(),o("div",qs,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430")):f("",!0),a.isAppLoading?f("",!0):(i(),o("div",Vs,[(i(!0),o(A,null,S(r.result,p=>(i(),I(n,{key:p.i,month:p},null,8,["month"]))),128))])),a.isAppLoading?f("",!0):(i(),o("div",Zs,[r.isFirstLoading?f("",!0):(i(),o("div",Bs,[Ps,c("span",Gs,h(a.formatTime(a.totalSeconds-a.totalDeltaSeconds)),1),a.totalDeltaSeconds>0?(i(),o("span",Js," ("+h(a.formatTime(a.totalSeconds))+") ",1)):f("",!0)])),r.isFirstLoading?f("",!0):(i(),o("div",Hs,[Ks,c("span",zs,h(a.totalDays-a.totalDeltaDays),1),a.totalDeltaDays>0?(i(),o("span",Qs," ("+h(a.totalDays)+") ",1)):f("",!0)])),Xs]))],2)}var ta=_(Ws,[["render",ea]]);const sa={props:["value"],emits:["changeDate"],data(){return{year:this.value||this.$store.state.yearlyYear}},mounted(){const t=this;new q(this.$refs.calendar,{view:"years",minView:"years",dateFormat:"yyyy",range:!1,selectedDates:this.year,toggleSelected:!1,onSelect(e){e.datepicker.hide(),t.$emit("changeDate",e.date)}})}},aa={ref:"calendar",type:"text",readonly:""};function ra(t,e,s,l,r,a){return i(),o("input",aa,null,512)}var na=_(sa,[["render",ra]]);const la={components:{SvgIcon:U,InputUsers:Q,InputYearlyCalendar:na},methods:{changeUser(t){this.$store.dispatch("yearlyFilterChange",{yearlyUserId:t})},changeDate(t){this.$store.dispatch("yearlyFilterChange",{yearlyYear:t.getTime()})},refreshData(){this.$store.dispatch("yearlyFilterChange",{})}}},ia={class:"app-filter"},oa=c("div",{class:"app-filter__spacer"},null,-1);function ca(t,e,s,l,r,a){const n=d("InputUsers"),p=d("InputYearlyCalendar"),u=d("SvgIcon");return i(),o("div",ia,[y(n,{class:"app-filter__item",value:t.$store.state.yearlyUserId,onChangeUser:a.changeUser},null,8,["value","onChangeUser"]),y(p,{class:"app-filter__item",value:this.$store.state.yearlyYear,onChangeDate:a.changeDate},null,8,["value","onChangeDate"]),oa,y(u,{name:"refresh",class:"app-filter__btn",title:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",onClick:a.refreshData},null,8,["onClick"])])}var pa=_(la,[["render",ca]]);const ua={components:{ReportYearly:ta,ReportYearlyFilter:pa}};function da(t,e,s,l,r,a){const n=d("ReportYearlyFilter"),p=d("ReportYearly");return T(t.$slots,"default",{},()=>[y(n),y(p)])}var ha=_(ua,[["render",da]]);const _a={data(){return{apiUrl:this.$store.state.appApiUrl}},async created(){},methods:{}},ya={class:"app-settings"};function ma(t,e,s,l,r,a){return i(),o("div",ya)}var ga=_(_a,[["render",ma]]);const fa={components:{AppSettings:ga}};function va(t,e,s,l,r,a){const n=d("AppSettings");return i(),I(n)}var ka=_(fa,[["render",va]]);const Da={components:{AppAuth:ht,AppNotify:Je,AppName:gt,AppMenu:wt,AppUser:Et,PageReportWeekly:Ss,PageReportYearly:ha,PageAppSettings:ka},created(){this.$store.dispatch("appLoaded")},computed:{isAppLoading(){return this.$store.state.appLoading},isAuth(){return this.$store.state.appAuth},currentPage(){return this.$store.state.menuCurrent}}},Ia={key:1,class:"app__sidebar"},wa={key:2,class:"app__page"};function Aa(t,e,s,l,r,a){const n=d("AppAuth"),p=d("AppName"),u=d("AppMenu"),m=d("AppUser"),D=d("AppNotify");return i(),o("div",{class:v(["app",{"is-loading":a.isAppLoading}])},[a.isAuth?f("",!0):(i(),I(n,{key:0})),a.isAuth?(i(),o("div",Ia,[y(p),y(u),y(m)])):f("",!0),a.isAuth?(i(),o("div",wa,[(i(),I(he,null,[(i(),I(de(a.currentPage)))],1024))])):f("",!0),y(D)],2)}var Sa=_(Da,[["render",Aa]]);_e(Sa).directive("click-outside",{mounted:function(t,e){t.clickOutsideEvent=function(s){t==s.target||t.contains(s.target)||e.value(s)},document.body.addEventListener("click",t.clickOutsideEvent)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}}).use(We).use(qe).mount("#app");
