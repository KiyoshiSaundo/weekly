import{o as c,c as d,a as i,A as Y,n as m,w as k,v as T,b as P,F as h,r as f,t as u,d as w,p as $,e as E,f as H,g,h as v,i as S,j as G,k as q,l as Q,m as X,I as Z,q as ee}from"./vendor.6995f699.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};te();var p=(e,t)=>{const r=e.__vccOpts||e;for(const[l,s]of t)r[l]=s;return r};const se={name:"AppHeader"},ae={class:"header"},re=i("h1",{class:"header__h1"},"\u041E\u0442\u0447\u0435\u0442\u044B",-1),le=[re];function ne(e,t,r,l,s,a){return c(),d("header",ae,le)}var ie=p(se,[["render",ne]]);const U=e=>{let t,r,l;return t=e.getDate(),t<10&&(t="0"+t),r=e.getMonth()+1,r<10&&(r="0"+r),l=e.getFullYear(),t+"."+r+"."+l},b=e=>{let t,r,l;return t=Math.floor(e/3600),r=Math.floor(e/60)-t*60,l=e%60,[t.toString().padStart(2,"0"),r.toString().padStart(2,"0"),l.toString().padStart(2,"0")].join(":")},oe=e=>{if(!e)return 0;let t,r,l;return e=e.split(":"),t=parseInt(e[0])||0,r=parseInt(e[1])||0,l=parseInt(e[2])||0,t*3600+r*60+l},ce=()=>{const e=new Date;return[e,e]},j=()=>{const e=new Date;let t=new Date(e-(e.getDay()-1)*864e5),r=new Date(e-(e.getDay()-1)*864e5+6*864e5);return[t,r]},de=()=>{const e=new Date;let t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);return[t,r]},ue=()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)},C={484:[484,609,917],589:["*"],59:["*"]},W=async(e,t)=>{const r=(n,o,_)=>(o.start=_,fetch(n,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(I=>I.json()));let l=[],s=0,a=null;for(;a===null||s<a;){let n=r(e,t,s);if(a===null){let o=await n;a=parseInt(o.total)}l.push(n),s+=50}return Promise.all(l)},J=async(e,t)=>fetch(e+"/task.elapseditem.getlist",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{ID:"asc"},filter:t,select:["ID","TASK_ID","SECONDS","CREATED_DATE"],params:{NAV_PARAMS:{nPageSize:0}}})}).then(r=>r.json()).then(r=>r.result),_e=async(e,t)=>W(e+"/tasks.task.list",{order:{ID:"asc"},filter:t,select:["ID","TITLE","GROUP_ID"]}).then(r=>r.reduce((l,s)=>l.concat(s.result.tasks),[])),ye=async(e,t)=>fetch(e+"/sonet_group.get",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({ORDER:{ID:"asc"},FILTER:t})}).then(r=>r.json()).then(r=>r.result),K=async e=>{const t=B(e);return C[t]!==void 0?!0:fetch(e+"/user.admin.json",{method:"post",headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>r.result).catch(()=>!1)},z=async e=>{const t=B(e);let r={ACTIVE:"true"};return C[t]!==void 0&&!C[t].includes("*")&&(r.ID=C[t]),W(e+"/user.get",{sort:"LAST_NAME",order:"asc",filter:r}).then(l=>l.reduce((s,a)=>s.concat(a.result),[]))},he=async(e,t)=>fetch("https://isdayoff.ru/api/getdata?year="+e+"&month="+t+"&delimeter=|&covid=1").then(r=>r.text()),B=e=>e.match(/rest\/(\d+)/)[1]||!1;const ge={data(){return{apiUrl:this.$store.state.weeklyApiUrl,userId:this.$store.state.weeklyUserId,start:this.$store.state.weeklyDateFrom,end:this.$store.state.weeklyDateTo,datePickerInst:!1,users:[],isUserAdmin:!1,isLoading:!1}},created(){this.getUsers()},mounted(){let e={content:"\u0414\u0435\u043D\u044C",onClick:l=>{let s=ce();l.selectDate(s),l.setViewDate(s[0])}},t={content:"\u041D\u0435\u0434\u0435\u043B\u044F",onClick:l=>{let s=j();l.selectDate(s),l.setViewDate(s[0])}},r={content:"\u041C\u0435\u0441\u044F\u0446",onClick:l=>{let s=de();l.selectDate(s),l.setViewDate(s[0])}};this.datePickerInst=new Y("[name=dates]",{range:!0,multipleDatesSeparator:" - ",selectedDates:[this.start,this.end],buttons:[e,t,r],toggleSelected:!1,onSelect(l){l.date.length==2&&l.datepicker.hide()}})},watch:{apiUrl(){this.setUserId(),this.getUsers()},users(){this.isLoading=!1}},methods:{async getUsers(){this.apiUrl&&(this.isLoading=!0,this.isUserAdmin=await K(this.apiUrl),this.isUserAdmin?this.users=await z(this.apiUrl):this.users=[])},setSettings(){this.$store.commit("weeklyApiChange",{weeklyApiUrl:this.apiUrl}),this.$store.commit("weeklyUserChange",{weeklyUserId:this.userId}),this.$store.commit("weeklyDateChange",{weeklyDateFrom:this.datePickerInst.selectedDates[0],weeklyDateTo:this.datePickerInst.selectedDates[1]||this.datePickerInst.selectedDates[0]})},setUserId(){if(this.apiUrl){let e=!1;(e=this.apiUrl.match(/rest\/(\d+)/))&&(this.userId=e[1]||!1)}else this.userId=!1}}},L=e=>($("data-v-f23a44fa"),e=e(),E(),e),pe={class:"settings__items"},me=L(()=>i("label",{class:"settings__label"},"\u0421\u0442\u0440\u043E\u043A\u0430 API",-1)),fe={key:0,class:"settings__item"},De=L(()=>i("label",{class:"settings__label"},"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",-1)),ke=["value"],Ie=L(()=>i("div",{class:"settings__item"},[i("label",{class:"settings__label"},"\u041F\u0435\u0440\u0438\u043E\u0434"),i("input",{class:"settings__input",type:"text",name:"dates"})],-1)),ve={class:"settings__item"};function Se(e,t,r,l,s,a){return c(),d("div",{class:m(["settings",{"is-loading":s.isLoading}])},[i("div",pe,[i("div",{class:m(["settings__item",{"settings__item--2":!s.isUserAdmin}])},[me,k(i("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.apiUrl=n),class:"settings__input",type:"text"},null,512),[[T,s.apiUrl]])],2),s.isUserAdmin?(c(),d("div",fe,[De,k(i("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.userId=n),class:"settings__input"},[(c(!0),d(h,null,f(s.users,n=>(c(),d("option",{key:n.ID,value:n.ID},u(n.LAST_NAME)+" "+u(n.NAME)+" ("+u(n.ID)+") ",9,ke))),128))],512),[[P,s.userId]])])):w("",!0),Ie,i("div",ve,[i("button",{class:"settings__btn",onClick:t[2]||(t[2]=(...n)=>a.setSettings&&a.setSettings(...n))}," \u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C ")])])],2)}var we=p(ge,[["render",Se],["__scopeId","data-v-f23a44fa"]]);const Ue={data(){return{result:[],isLoading:!1}},computed:{settings(){return{apiUrl:this.$store.state.weeklyApiUrl,userId:this.$store.state.weeklyUserId,dateFrom:this.$store.state.weeklyDateFrom,dateTo:this.$store.state.weeklyDateTo}},summChecked(){return this.result.reduce((e,t)=>e+=t.selected?t.seconds:0,0)},summTotal(){return this.result.reduce((e,t)=>e+=t.seconds,0)}},created(){this.getResult()},watch:{settings(){this.getResult()},result(){this.isLoading=!1}},methods:{formatDate:U,formatTime:b,async getResult(){if(!this.settings.apiUrl||!this.settings.userId)return!1;this.isLoading=!0;const[e,t,r]=await this.getResultData();let l={0:{id:0,name:"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0433\u0440\u0443\u043F\u043F\u0435",seconds:0,selected:this.result[0]?this.result[0].selected:!1,tasks:{0:{id:0,name:"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0437\u0430\u0434\u0430\u0447\u0435 \u0438\u043B\u0438 \u0437\u0430\u0434\u0430\u0447\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0430",seconds:0}}}};r.forEach(a=>{l[a.ID]={id:a.ID,name:a.NAME,seconds:0,selected:this.result[a.ID]?this.result[a.ID].selected:!1,tasks:{}}});let s={0:0};t.forEach(a=>{let n=l[a.groupId],o=n?n.id:0;s[a.id]=o,l[o].tasks[a.id]={id:a.id,name:a.title,seconds:0}}),e.forEach(a=>{let n=l[s[a.TASK_ID]],o=n?n.id:0,_=l[o].tasks[a.TASK_ID],I=_?_.id:0;l[o].seconds+=parseInt(a.SECONDS),l[o].tasks[I].seconds+=parseInt(a.SECONDS)}),this.result=Object.values(l).filter(a=>(a.tasks=Object.values(a.tasks).filter(n=>n.seconds),a.seconds))},async getResultData(){let e=[],t={USER_ID:this.settings.userId,">=CREATED_DATE":U(this.settings.dateFrom)+" 00:00:00","<=CREATED_DATE":U(this.settings.dateTo)+" 23:59:59"};t.USER_ID&&(e=await J(this.settings.apiUrl,t));let r=[];t={ID:e.map(s=>s.TASK_ID)},t.ID.length&&(r=await _e(this.settings.apiUrl,t));let l=[];return t={ID:r.map(s=>s.groupId)},t.ID.length&&(l=await ye(this.settings.apiUrl,t)),[e,r,l]}}},Ae=i("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},[i("path",{d:"M 15 3 C 12.031398 3 9.3028202 4.0834384 7.2070312 5.875 A 1.0001 1.0001 0 1 0 8.5058594 7.3945312 C 10.25407 5.9000929 12.516602 5 15 5 C 20.19656 5 24.450989 8.9379267 24.951172 14 L 22 14 L 26 20 L 30 14 L 26.949219 14 C 26.437925 7.8516588 21.277839 3 15 3 z M 4 10 L 0 16 L 3.0507812 16 C 3.562075 22.148341 8.7221607 27 15 27 C 17.968602 27 20.69718 25.916562 22.792969 24.125 A 1.0001 1.0001 0 1 0 21.494141 22.605469 C 19.74593 24.099907 17.483398 25 15 25 C 9.80344 25 5.5490109 21.062074 5.0488281 16 L 8 16 L 4 10 z"})],-1),Ce=[Ae],Te={key:0,class:"weekly__items"},be={class:"weekly__label"},$e=["onUpdate:modelValue"],Ee={class:"weekly__tasks"},Le={key:1,class:"weekly__footer"},xe={class:"weekly__checked"},Re={class:"weekly__total"},Fe={key:2,class:"weekly__empty"};function Ne(e,t,r,l,s,a){return c(),d("div",{class:m(["weekly",{"is-loading":s.isLoading}])},[i("div",{class:"weekly__refresh",title:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435",onClick:t[0]||(t[0]=(...n)=>a.getResult&&a.getResult(...n))},Ce),s.result.length?(c(),d("div",Te,[(c(!0),d(h,null,f(s.result,n=>(c(),d("div",{key:n.id,class:"weekly__item"},[i("label",be,[k(i("input",{"onUpdate:modelValue":o=>n.selected=o,class:"weekly__checkbox",type:"checkbox",value:"group.id"},null,8,$e),[[H,n.selected]]),i("b",null,u(n.name),1),g(" ("+u(a.formatTime(n.seconds))+") ",1)]),i("div",Ee,[(c(!0),d(h,null,f(n.tasks,o=>(c(),d("div",{key:o.id,class:"weekly__task"},u(o.id)+" - "+u(o.name)+" ("+u(a.formatTime(o.seconds))+") ",1))),128))])]))),128))])):w("",!0),s.result.length?(c(),d("div",Le,[i("div",xe," \u0421\u0443\u043C\u043C\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445: "+u(a.formatTime(a.summChecked)),1),i("div",Re," \u0412\u0441\u0435\u0433\u043E \u0437\u0430\u0442\u0440\u0430\u0447\u0435\u043D\u043E: "+u(a.formatTime(a.summTotal)),1)])):w("",!0),s.result.length?w("",!0):(c(),d("div",Fe,"\u0414\u0430\u043D\u043D\u044B\u0445 \u043D\u0435\u0442"))],2)}var Me=p(Ue,[["render",Ne]]);const Oe={components:{SettingsWeekly:we,Weekly:Me}};function Ve(e,t,r,l,s,a){const n=v("SettingsWeekly"),o=v("Weekly");return c(),d("div",null,[S(n),S(o)])}var Ye=p(Oe,[["render",Ve]]);const Pe={data(){return{apiUrl:this.$store.state.yearlyApiUrl,userId:this.$store.state.yearlyUserId,date:this.$store.state.yearlyDate,datePickerInst:!1,users:[],isUserAdmin:!1,isLoading:!1}},created(){this.getUsers()},mounted(){this.datePickerInst=new Y("[name=year]",{view:"years",minView:"years",dateFormat:"yyyy",range:!1,selectedDates:this.date,toggleSelected:!1,onSelect(e){e.datepicker.hide()}})},watch:{apiUrl(){this.setUserId(),this.getUsers()},users(){this.isLoading=!1}},methods:{async getUsers(){this.apiUrl&&(this.isLoading=!0,this.isUserAdmin=await K(this.apiUrl),this.isUserAdmin?this.users=await z(this.apiUrl):this.users=[])},setSettings(){this.$store.commit("yearlyApiChange",{yearlyApiUrl:this.apiUrl}),this.$store.commit("yearlyUserChange",{yearlyUserId:this.userId}),this.$store.commit("yearlyDateChange",{yearlyDate:this.datePickerInst.selectedDates[0]})},setUserId(){if(this.apiUrl){let e=!1;(e=this.apiUrl.match(/rest\/(\d+)/))&&(this.userId=e[1]||!1)}else this.userId=!1}}},x=e=>($("data-v-468e63aa"),e=e(),E(),e),je={class:"settings__items"},We=x(()=>i("label",{class:"settings__label"},"\u0421\u0442\u0440\u043E\u043A\u0430 API",-1)),Je={key:0,class:"settings__item"},Ke=x(()=>i("label",{class:"settings__label"},"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",-1)),ze=["value"],Be=x(()=>i("div",{class:"settings__item"},[i("label",{class:"settings__label"},"\u041F\u0435\u0440\u0438\u043E\u0434"),i("input",{class:"settings__input",type:"text",name:"year"})],-1)),He={class:"settings__item"};function Ge(e,t,r,l,s,a){return c(),d("div",{class:m(["settings",{"is-loading":s.isLoading}])},[i("div",je,[i("div",{class:m(["settings__item",{"settings__item--2":!s.isUserAdmin}])},[We,k(i("input",{class:"settings__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>s.apiUrl=n)},null,512),[[T,s.apiUrl]])],2),s.isUserAdmin?(c(),d("div",Je,[Ke,k(i("select",{class:"settings__input","onUpdate:modelValue":t[1]||(t[1]=n=>s.userId=n)},[(c(!0),d(h,null,f(s.users,n=>(c(),d("option",{key:n.ID,value:n.ID},u(n.LAST_NAME)+" "+u(n.NAME)+" ("+u(n.ID)+") ",9,ze))),128))],512),[[P,s.userId]])])):w("",!0),Be,i("div",He,[i("button",{class:"settings__btn",onClick:t[2]||(t[2]=(...n)=>a.setSettings&&a.setSettings(...n))},"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C")])])],2)}var qe=p(Pe,[["render",Ge],["__scopeId","data-v-468e63aa"]]);const Qe={data(){return{result:[],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],isLoading:!1,reports:{},openedReport:!1}},computed:{settings(){return{apiUrl:this.$store.state.yearlyApiUrl,userId:this.$store.state.yearlyUserId,date:this.$store.state.yearlyDate,deltaSeconds:this.$store.state.yearlyDeltaSeconds,deltaDays:this.$store.state.yearlyDeltaDays}},totalSeconds(){return this.result.reduce((e,t)=>e+=t.seconds,0)},totalDeltaSeconds(){return this.result.reduce((e,t)=>e+=this.unformatTime(t.deltaSeconds),0)},totalDays(){return this.result.reduce((e,t)=>e+=this.getFloat(t.days),0)},totalDeltaDays(){return this.result.reduce((e,t)=>e+=this.getFloat(t.deltaDays),0)}},mounted(){this.getResult()},watch:{settings(){this.getResult()},result(){this.isLoading=!1}},methods:{formatDate:U,formatTime:b,unformatTime:oe,async getResult(){var _,I,R,F,N,M,O,V;let e=[],t=this.settings.userId,r=this.settings.date.getFullYear(),l=this.settings.deltaSeconds,s=this.settings.deltaDays;this.isLoading=!0;let a=JSON.parse(localStorage.getItem("yearlyDays"));this.months.forEach((y,D)=>{e[D]={k:D,name:y,seconds:0,deltaSeconds:null,days:0,deltaDays:null,result:0,reports:{}}});for(const y of e){let D=await this.getMonthWorkDays(r,y.k+1);e[y.k].days=D,((I=(_=l==null?void 0:l[t])==null?void 0:_[r])==null?void 0:I[y.k])&&(e[y.k].deltaSeconds=b(l[t][r][y.k])),((F=(R=a==null?void 0:a[t])==null?void 0:R[r])==null?void 0:F[y.k])&&!((M=(N=s==null?void 0:s[t])==null?void 0:N[r])==null?void 0:M[y.k])&&(s[t]||(s[t]={}),s[t][r]||(s[t][r]={}),s[t][r][y.k]=D-a[t][r][y.k],localStorage.setItem("yearlyDeltaDays",JSON.stringify(s)),delete a[t][r][y.k],localStorage.setItem("yearlyDays",JSON.stringify(a))),((V=(O=s==null?void 0:s[t])==null?void 0:O[r])==null?void 0:V[y.k])&&(e[y.k].deltaDays=s[t][r][y.k])}let n=[],o={USER_ID:t,">=CREATED_DATE":"01.01."+r+" 00:00:00","<=CREATED_DATE":"31.12."+r+" 23:59:59"};o.USER_ID&&(n=await J(this.settings.apiUrl,o)),n.forEach(y=>{let D=new Date(y.CREATED_DATE);e[D.getMonth()].seconds+=parseInt(y.SECONDS)}),this.fillReports(n),this.result=e,this.recalcResult()},changeSeconds(e,t){var a,n;let r=this.settings.deltaSeconds,l=this.settings.userId,s=this.settings.date.getFullYear();t=this.unformatTime(t),((n=(a=r[l])==null?void 0:a[s])==null?void 0:n[e])!=t&&(r[l]||(r[l]={}),r[l][s]||(r[l][s]={}),t?r[l][s][e]=t:delete r[l][s][e],this.$store.commit("yearlyDeltaSecondsChange",{yearlyDeltaSeconds:r}),this.recalcResult())},changeDays(e,t){var a,n;let r=this.settings.deltaDays,l=this.settings.userId,s=this.settings.date.getFullYear();t=this.getFloat(t),((n=(a=r[l])==null?void 0:a[s])==null?void 0:n[e])!=t&&(r[l]||(r[l]={}),r[l][s]||(r[l][s]={}),t?r[l][s][e]=t:delete r[l][s][e],this.$store.commit("yearlyDeltaDaysChange",{yearlyDeltaDays:r}),this.recalcResult())},recalcResult(){this.result=this.result.map(e=>{let t=this.getFloat(e.seconds)-this.getFloat(this.unformatTime(e.deltaSeconds)),r=this.getFloat(e.days)-this.getFloat(e.deltaDays);return e.result=(Math.ceil(t/60/60/r*100)/100).toFixed(1),e})},fillReports(e){let t={},r=this.settings.date.getFullYear();for(let l=0,s=11;l<=s;l++){t[l]={i:l,days:{}};let a=33-new Date(r,l,33).getDate();for(let n=1;n<=a;n++){let o=new Date(r,l,n);t[l].days[n]={i:n,date:U(o),day:this.getDayName(o.getDay()),seconds:0}}}e.forEach(l=>{let s=new Date(l.CREATED_DATE);t[s.getMonth()].days[s.getDate()].seconds+=parseInt(l.SECONDS)}),this.reports=t},async getMonthWorkDays(e,t){let r=0;return r=(await he(e,t)).split("|").reduce((s,a)=>a!=1?++s:s,0),r},getFloat(e){return parseFloat(String(e||0).replace(",","."))},getDayName(e){switch(e){case 0:return"\u0432\u0441";case 1:return"\u043F\u043D";case 2:return"\u0432\u0442";case 3:return"\u0441\u0440";case 4:return"\u0447\u0442";case 5:return"\u043F\u0442";case 6:return"\u0441\u0431"}},openReport(e){e.target.closest("tr").classList.toggle("is-open")}}},A=e=>($("data-v-19f32268"),e=e(),E(),e),Xe=A(()=>i("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},[i("path",{d:"M 15 3 C 12.031398 3 9.3028202 4.0834384 7.2070312 5.875 A 1.0001 1.0001 0 1 0 8.5058594 7.3945312 C 10.25407 5.9000929 12.516602 5 15 5 C 20.19656 5 24.450989 8.9379267 24.951172 14 L 22 14 L 26 20 L 30 14 L 26.949219 14 C 26.437925 7.8516588 21.277839 3 15 3 z M 4 10 L 0 16 L 3.0507812 16 C 3.562075 22.148341 8.7221607 27 15 27 C 17.968602 27 20.69718 25.916562 22.792969 24.125 A 1.0001 1.0001 0 1 0 21.494141 22.605469 C 19.74593 24.099907 17.483398 25 15 25 C 9.80344 25 5.5490109 21.062074 5.0488281 16 L 8 16 L 4 10 z"})],-1)),Ze=[Xe],et={class:"yearly__table"},tt=A(()=>i("thead",null,[i("tr",null,[i("th"),i("th",null,"\u041C\u0435\u0441\u044F\u0446"),i("th",null,"\u0420\u0430\u0431\u043E\u0447\u0435\u0435 \u0432\u0440\u0435\u043C\u044F"),i("th",null,"\u0420\u0430\u0431\u043E\u0447\u0438\u0435 \u0434\u043D\u0438"),i("th",null,"\u0412\u044B\u0440\u0430\u0431\u043E\u0442\u043A\u0430")])],-1)),st={class:"is-collapse"},at={class:"is-name"},rt={class:"is-seconds"},lt=g(" - "),nt=["onUpdate:modelValue","onChange","onKeyup"],it=g(" = "),ot={class:"is-days"},ct=g(" - "),dt=["onUpdate:modelValue","onChange","onKeyup"],ut=g(" = "),_t={class:"is-result"},yt={class:"yearly__reports"},ht={colspan:"5",class:"is-report"},gt=A(()=>i("td",null,null,-1)),pt=A(()=>i("td",null,null,-1)),mt={class:"is-seconds-result"},ft=g(" - "),Dt=g(" = "),kt={class:"is-days-result"},It=g(" - "),vt=g(" = "),St=A(()=>i("td",null,null,-1));function wt(e,t,r,l,s,a){const n=G("mask");return c(),d("div",{class:m(["yearly",{"is-loading":s.isLoading}])},[i("div",{class:"yearly__refresh",title:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435",onClick:t[0]||(t[0]=(...o)=>a.getResult&&a.getResult(...o))},Ze),i("table",et,[tt,i("tbody",null,[(c(!0),d(h,null,f(s.result,o=>(c(),d(h,{key:o.k},[i("tr",null,[i("td",st,[i("span",{class:"yearly__collapse",onClick:t[1]||(t[1]=(..._)=>a.openReport&&a.openReport(..._))})]),i("td",at,u(o.name),1),i("td",rt,[i("span",null,u(a.formatTime(o.seconds)),1),lt,i("span",null,[k(i("input",{"onUpdate:modelValue":_=>o.deltaSeconds=_,type:"text",onChange:_=>a.changeSeconds(o.k,o.deltaSeconds),onKeyup:_=>a.changeSeconds(o.k,o.deltaSeconds)},null,40,nt),[[T,o.deltaSeconds],[n,{regex:"[0-9]*:[0-5][0-9]:[0-5][0-9]"}]])]),it,i("span",null,[i("b",null,u(a.formatTime(o.seconds-a.unformatTime(o.deltaSeconds))),1)])]),i("td",ot,[i("span",null,u(o.days),1),ct,i("span",null,[k(i("input",{"onUpdate:modelValue":_=>o.deltaDays=_,type:"text",onChange:_=>a.changeDays(o.k,o.deltaDays),onKeyup:_=>a.changeDays(o.k,o.deltaDays)},null,40,dt),[[T,o.deltaDays],[n,{regex:"[0-9]*[.,]?[0-9]*"}]])]),ut,i("span",null,[i("b",null,u(o.days-a.getFloat(o.deltaDays)),1)])]),i("td",_t,[i("b",null,u(o.result),1)])]),i("tr",yt,[i("td",ht,[(c(!0),d(h,null,f(s.reports[o.k].days,_=>(c(),d("div",{key:_.i},u(_.date)+" - "+u(_.day)+" - "+u(a.formatTime(_.seconds)),1))),128))])])],64))),128))]),i("tfoot",null,[i("tr",null,[gt,pt,i("td",mt,[i("span",null,u(a.formatTime(a.totalSeconds)),1),ft,i("span",null,u(a.formatTime(a.totalDeltaSeconds)),1),Dt,i("span",null,u(a.formatTime(a.totalSeconds-a.totalDeltaSeconds)),1)]),i("td",kt,[i("span",null,u(a.totalDays),1),It,i("span",null,u(a.totalDeltaDays),1),vt,i("span",null,u(a.totalDays-a.totalDeltaDays),1)]),St])])])],2)}var Ut=p(Qe,[["render",wt],["__scopeId","data-v-19f32268"]]);const At={components:{SettingsYearly:qe,Yearly:Ut}};function Ct(e,t,r,l,s,a){const n=v("SettingsYearly"),o=v("Yearly");return c(),d("div",null,[S(n),S(o)])}var Tt=p(At,[["render",Ct]]);const bt={components:{TabWeekly:Ye,TabYearly:Tt},data(){return{active:0,tabs:[{k:0,name:"\u041D\u0435\u0434\u0435\u043B\u044C\u043A\u0430",content:"TabWeekly"},{k:1,name:"\u0413\u043E\u0434\u0438\u043A",content:"TabYearly"}]}},methods:{changeTab(e){this.active=e}}},$t={class:"tabs"},Et={class:"tabs__tabs"},Lt=["onClick"],xt={class:"tabs__contents"},Rt=["onClick"];function Ft(e,t,r,l,s,a){return c(),d("div",$t,[i("div",Et,[(c(!0),d(h,null,f(s.tabs,n=>(c(),d("div",{key:n.k,class:m(["tabs__tab",{"is-active":n.k==s.active}]),onClick:o=>a.changeTab(n.k)},u(n.name),11,Lt))),128))]),i("div",xt,[(c(!0),d(h,null,f(s.tabs,n=>(c(),d("div",{key:n.k,class:m(["tabs__content",{"is-active":n.k==s.active}]),onClick:o=>a.changeTab(n.k)},[(c(),q(Q(n.content)))],10,Rt))),128))])])}var Nt=p(bt,[["render",Ft],["__scopeId","data-v-259911e2"]]);const Mt={name:"App",components:{AppHeader:ie,Tabs:Nt}},Ot={class:"reports"};function Vt(e,t,r,l,s,a){const n=v("AppHeader"),o=v("Tabs");return c(),d("div",Ot,[S(n),S(o)])}var Yt=p(Mt,[["render",Vt]]);const[Pt,jt]=j(),Wt=ue();var Jt=X({state(){return{weeklyApiUrl:localStorage.getItem("weeklyApiUrl")||"",weeklyUserId:localStorage.getItem("weeklyUserId")||"",weeklyDateFrom:Pt,weeklyDateTo:jt,yearlyApiUrl:localStorage.getItem("yearlyApiUrl")||"",yearlyUserId:localStorage.getItem("yearlyUserId")||"",yearlyDate:Wt,yearlyDeltaDays:JSON.parse(localStorage.getItem("yearlyDeltaDays"))||{},yearlyDeltaSeconds:JSON.parse(localStorage.getItem("yearlyDeltaSeconds"))||{}}},mutations:{weeklyApiChange(e,t){e.weeklyApiUrl=t.weeklyApiUrl,localStorage.setItem("weeklyApiUrl",t.weeklyApiUrl)},weeklyUserChange(e,t){e.weeklyUserId=t.weeklyUserId,localStorage.setItem("weeklyUserId",t.weeklyUserId)},weeklyDateChange(e,t){e.weeklyDateFrom=t.weeklyDateFrom,e.weeklyDateTo=t.weeklyDateTo},yearlyApiChange(e,t){e.yearlyApiUrl=t.yearlyApiUrl,localStorage.setItem("yearlyApiUrl",t.yearlyApiUrl)},yearlyUserChange(e,t){e.yearlyUserId=t.yearlyUserId,localStorage.setItem("yearlyUserId",t.yearlyUserId)},yearlyDateChange(e,t){e.yearlyDate=t.yearlyDate,localStorage.setItem("yearlyDate",t.yearlyDate)},yearlyDeltaDaysChange(e,t){e.yearlyDeltaDays=t.yearlyDeltaDays,localStorage.setItem("yearlyDeltaDays",JSON.stringify(t.yearlyDeltaDays))},yearlyDeltaSecondsChange(e,t){e.yearlyDeltaSeconds=t.yearlyDeltaSeconds,localStorage.setItem("yearlyDeltaSeconds",JSON.stringify(t.yearlyDeltaSeconds))}}}),Kt={install:e=>{e.directive("mask",{mounted:(t,r)=>{Z(r.value).mask(t)}})}};ee(Yt).use(Jt).use(Kt).mount("#app");
